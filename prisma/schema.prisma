// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  Id       Int        @id @default(autoincrement())
  Username String
  Password String
  Post     Post[]
  PostVote PostVote[]
}

model Post {
  Id     Int    @id @default(autoincrement())
  UserId Int
  Title  String
  Text   String

  User     User       @relation(fields: [UserId], references: [Id])
  PostVote PostVote[]

  @@index([UserId], name: "UserId")
}

model PostVote {
  Id     Int @id @default(autoincrement())
  PostId Int
  UserId Int
  VoteId Int

  Post   Post  @relation(fields: [PostId], references: [Id])
  User   User  @relation(fields: [UserId], references: [Id])
  Vote   Vote  @relation(fields: [VoteId], references: [Id])

  @@index([PostId], name: "PostId")
}

model Vote {
  Id    Int    @id @default(autoincrement())
  Label String @db.VarChar(50)

  PostVote PostVote[]
}
